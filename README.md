A stream processing util.
Process a stream in batches of items instead of one item at a time.
The util buffers the stream in a batch and flushes it for processing when the batch is full.

# Usage

```
const bufferedProc = createBufferedProcess({
  maxSize: 3,
  process: v => console.log(`value:${v}`),
});

// basic usage: pass each item manually with .push()
await bufferedProc.push(1);
await bufferedProc.push(2);
await bufferedProc.push(3);
// Flushes batch
// Console:
//   value:1
//   value:2
//   value:3
await bufferedProc.push(4);
await bufferedProc.push(5);
await bufferedProc.flush();
// Console:
//   value:4
//   value:5


// basic usage: process a stream with .pipe()
const data = [10,20,30,40,50,60,70];
const stream = each => data.forEach(each);
await bufferedProc.pipe(stream);
// Console:
//   value:10
//   value:20
//   value:30
//   value:40
//   value:50
//   value:60
//   value:70
```

# Development
```
# Install
$ npm i

# Test
$ npm run lint
$ npm run test
```

# API 

Generated by [JsDoc](https://jsdoc.app/)

## Typedefs

<dl>
<dt><a href="#StreamFunction">StreamFunction</a> : <code>function</code></dt>
<dd></dd>
<dt><a href="#BufferedProcess">BufferedProcess</a></dt>
<dd></dd>
</dl>

<a name="StreamFunction"></a>

## StreamFunction : <code>function</code>
**Kind**: global typedef  

| Param | Type |
| --- | --- |
| each | <code>function</code> | 

<a name="BufferedProcess"></a>

## BufferedProcess
**Kind**: global typedef  

* [BufferedProcess](#BufferedProcess)
    * _instance_
        * [.isProcessing](#BufferedProcess+isProcessing) : <code>Boolean</code>
        * [.currentProcess](#BufferedProcess+currentProcess) : <code>Boolean</code>
        * [.maxSize](#BufferedProcess+maxSize) : <code>Number</code>
        * [.flushCount](#BufferedProcess+flushCount) : <code>Number</code>
        * [.total](#BufferedProcess+total) : <code>Number</code>
        * [.error](#BufferedProcess+error) : <code>Error</code>
        * [.isFull()](#BufferedProcess+isFull) ⇒ <code>Boolean</code>
        * [.hasError()](#BufferedProcess+hasError) ⇒ <code>Boolean</code>
        * [.push(item)](#BufferedProcess+push)
        * [.flush()](#BufferedProcess+flush)
        * [.waitForProcesses()](#BufferedProcess+waitForProcesses)
        * [.pipe(stream)](#BufferedProcess+pipe)
    * _static_
        * [.create(options)](#BufferedProcess.create)

<a name="BufferedProcess+isProcessing"></a>

### bufferedProcess.isProcessing : <code>Boolean</code>
**Kind**: instance property of [<code>BufferedProcess</code>](#BufferedProcess)  
<a name="BufferedProcess+currentProcess"></a>

### bufferedProcess.currentProcess : <code>Boolean</code>
**Kind**: instance property of [<code>BufferedProcess</code>](#BufferedProcess)  
<a name="BufferedProcess+maxSize"></a>

### bufferedProcess.maxSize : <code>Number</code>
**Kind**: instance property of [<code>BufferedProcess</code>](#BufferedProcess)  
<a name="BufferedProcess+flushCount"></a>

### bufferedProcess.flushCount : <code>Number</code>
**Kind**: instance property of [<code>BufferedProcess</code>](#BufferedProcess)  
<a name="BufferedProcess+total"></a>

### bufferedProcess.total : <code>Number</code>
**Kind**: instance property of [<code>BufferedProcess</code>](#BufferedProcess)  
<a name="BufferedProcess+error"></a>

### bufferedProcess.error : <code>Error</code>
**Kind**: instance property of [<code>BufferedProcess</code>](#BufferedProcess)  
<a name="BufferedProcess+isFull"></a>

### bufferedProcess.isFull() ⇒ <code>Boolean</code>
**Kind**: instance method of [<code>BufferedProcess</code>](#BufferedProcess)  
<a name="BufferedProcess+hasError"></a>

### bufferedProcess.hasError() ⇒ <code>Boolean</code>
**Kind**: instance method of [<code>BufferedProcess</code>](#BufferedProcess)  
<a name="BufferedProcess+push"></a>

### bufferedProcess.push(item)
**Kind**: instance method of [<code>BufferedProcess</code>](#BufferedProcess)  

| Param | Type |
| --- | --- |
| item | <code>\*</code> | 

<a name="BufferedProcess+flush"></a>

### bufferedProcess.flush()
**Kind**: instance method of [<code>BufferedProcess</code>](#BufferedProcess)  
<a name="BufferedProcess+waitForProcesses"></a>

### bufferedProcess.waitForProcesses()
**Kind**: instance method of [<code>BufferedProcess</code>](#BufferedProcess)  
<a name="BufferedProcess+pipe"></a>

### bufferedProcess.pipe(stream)
**Kind**: instance method of [<code>BufferedProcess</code>](#BufferedProcess)  

| Param | Type |
| --- | --- |
| stream | [<code>StreamFunction</code>](#StreamFunction) | 

<a name="BufferedProcess.create"></a>

### BufferedProcess.create(options)
**Kind**: static method of [<code>BufferedProcess</code>](#BufferedProcess)  

| Param | Type |
| --- | --- |
| options | <code>Object</code> | 
| options.maxSize | <code>Number</code> | 
| options.process | <code>function</code> | 

